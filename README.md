# DeEvolve: LLM-driven Evolutionary Optimization for Truck-Drone Delivery

## Overview

We propose **DeEvolve**, a novel framework that integrates large language models with evolutionary computation to automatically optimize truck-drone last-mile delivery route planning algorithms. The study validates the method through experiments on the Flying Sidekick Traveling Salesman Problem (FSTSP), Traveling Salesman Problem (TSP), and Capacitated Vehicle Routing Problem (CVRP). The results demonstrate that this approach effectively enhances the performance of the original algorithms, particularly for the structurally complex FSTSP, where its algorithm decomposition strategy exhibits unique advantages. This work provides new insights and methodologies for the application of artificial intelligence in logistics and delivery.

## Methods Included

This project contains implementations for three combinatorial optimization problems:

### FSTSP (Flying Sidekick Traveling Salesman Problem)
Five different method variants:
- **DeEvolve** - Our proposed framework with full decomposition
- **wode** - DeEvolve variant without decomposition  
- **EoH_CP** - EoH adapted for mutation of the parent
- **wosel** - Without module selection
- **wotext** - Without text description generation

### TSP (Traveling Salesman Problem)
- **DeEvolve** - Our framework applied to TSP
- **wode** - DeEvolve variant without decomposition  
- **EoH_CP** - EoH adapted for mutation of the parent

### CVRP (Capacitated Vehicle Routing Problem)  
- **DeEvolve** - Our framework applied to CVRP
- **wode** - DeEvolve variant without decomposition  
- **EoH_CP** - EoH adapted for mutation of the parent

## Quick Start

### Running Evolution Process

#### For FSTSP:
1. **Navigate to FSTSP Directory**: Go to the `FSTSP` folder.
2. **Select Method**: Choose from the five available method directories (`DeEvolve`, `wode`, `EoH_CP`, `wosel`, `wotext`).
3. **Prepare Data**: 
   - Copy your evolution data to the selected method directory.
   - Replace the `points` section in both `code_init.py` and `evaluate.py` files.
4. **Configure API Settings**:
   - Update the LLM-related parameters in the `paras` section of `run.py` with your own API information.
5. **Execute Evolution**:
   - Run `run.py` to initiate the evolution operation.
   - The optimal program will be output upon completion.

#### For CVRP and TSP:
1. **Navigate to Problem Directory**: Choose either `CVRP` or `TSP` folder.
2. **Select Method**: Choose from the available method directories (`DeEvolve`, `wode`, `EoH_CP`).
3. **Prepare Data**: 
   - CVRP and TSP use data files stored in their respective directories.
   - Locate the data loading sections in `evaluate.py` and `run.py` files.
   - Change the data file name to your desired experimental dataset.
4. **Configure API Settings**:
   - Update the LLM-related parameters in the `paras` section of `run.py` with your own API information.
5. **Execute Evolution**:
   - Run `run.py` to initiate the evolution operation.
   - The optimal program will be output upon completion.

### Using Evolved Examples (FSTSP only)

The `FSTSP/examples` directory contains five files, each representing an example program evolved by one of the five methods:

1. **Select Example**: Choose the example file corresponding to your desired method.
2. **Update Data**: Replace the `points` data in the file with your own dataset.  
3. **Run Algorithm**: Execute the file to obtain the route generated by the corresponding algorithm.

## Implementation Details

Each method directory contains the following core files:
- `run.py` - Main evolution execution script.
- `code_init.py` - Initial code population generation.
- `evaluate.py` - Fitness evaluation functions.  
- `api_general.py` - LLM API interface.
- `prompts.py` - LLM prompt templates.
